<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Duck List</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-blue-50 min-h-screen p-6">
    <h1
      class="text-5xl font-extrabold text-yellow-600 drop-shadow-sm text-center"
    >
      ü¶Ü Duck-clopedia
    </h1>
    <p class="text-lg text-gray-700 mt-3 px-4 max-w-2xl mx-auto text-center">
      ‚ú® The
      <span class="font-semibold text-yellow-800"
        >delightful duck directory</span
      >
      and their
      <span class="font-semibold text-yellow-800">fun, fascinating facts</span>.
      ‚ú®
    </p>

    <div class="max-w-2xl mx-auto">
      <h1 class="text-3xl font-bold text-gray-800 mb-1 pt-2">Duck Registry</h1>

      <!-- Add Duck Form -->
      <div class="bg-white p-6 rounded-xl shadow">
        <h2 class="text-xl font-semibold text-gray-700 mb-4">Add a New Duck</h2>
        <form method="post" class="space-y-4">
          {% csrf_token %}
          <div>
            <div>{{ form.name.label_tag }} {{ form.name }}</div>
            {% if form.name.errors %}
            <p class="text-red-500 text-sm">{{ form.name.errors.0 }}</p>
            {% endif %}
          </div>
          <div>
            <div>{{ form.description.label_tag }} {{ form.description }}</div>
            {% if form.description.errors %}
            <p class="text-red-500 text-sm">{{ form.description.errors.0 }}</p>
            {% endif %}
          </div>
          <button
            type="submit"
            class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
          >
            ‚ûï Add Duck
          </button>
        </form>
      </div>
      <div class="flex justify-center gap-2 mb-2 animate-bounce pt-10">
        <span class="text-2xl">üê£</span>
        <span class="text-2xl">üê•</span>
        <span class="text-2xl">ü¶Ü</span>
      </div>
      <h1 class="text-3xl font-bold text-gray-800 mb-1 pt-2">Duck List</h1>
      {% if duck_list %}
      <ul class="space-y-3">
        {% for duck in duck_list %}
        <li
          class="flex justify-between items-center bg-white rounded-lg shadow p-4 hover:bg-blue-100 transition"
        >
          <a href="{% url 'ducks:duck_by_id' duck.id %}" class="flex-1">
            <span class="font-semibold">{{ duck.name }}</span><br />
            <span class="text-gray-500 text-sm">{{ duck.description }}</span>
          </a>

          <form
            action="{% url 'ducks:delete_duck_by_id' duck.id %}"
            method="post"
            onsubmit="return confirm('Are you sure you want to delete {{ duck.name }}?')"
            class="ml-4"
          >
            {% csrf_token %}
            <button
              type="submit"
              class="text-red-500 hover:text-red-700 text-xl font-bold"
              title="Delete this duck"
            >
              üóëÔ∏è
            </button>
          </form>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p class="text-center text-gray-600">No ducks are available.</p>
      {% endif %}
    </div>
    {% if messages %} {% for message in messages %}
    <div
      id="toast"
      role="alert"
      class="fixed top-4 right-4 px-4 py-2 rounded shadow flex items-center space-x-4 opacity-0 transition-opacity duration-300 {% if 'error' in message.tags %} bg-red-600 text-white {% elif 'success' in message.tags %} bg-green-600 text-white {% else %} bg-gray-600 text-white {% endif %}"
    >
      <div>{{ message }}</div>
      <button
        id="toast-close"
        class="text-white hover:text-gray-200 focus:outline-none"
        aria-label="Close notification"
        type="button"
      >
        √ó
      </button>
    </div>

    <script>
      const toast = document.getElementById("toast");
      const closeBtn = document.getElementById("toast-close");

      // Show toast on page load
      toast.classList.remove("opacity-0");

      // Auto-hide toast after 3 seconds
      const hideTimeout = setTimeout(() => {
        toast.classList.add("opacity-0");
      }, 3000);

      // Close button hides toast immediately
      closeBtn.addEventListener("click", () => {
        clearTimeout(hideTimeout);
        toast.classList.add("opacity-0");
      });
    </script>
    {% endfor %} {% endif %}
  </body>
</html>
